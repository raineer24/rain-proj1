<div class="main-content">
  <div class="container">
    <div class="row no-gutter">
      <div class="col-md-6 bg-light">
        <div class="login d-flex align-items-center py-5">
          <div class="container">
            <div class="row">
              <div class="col-lg-10 mx-auto">
                <h3 class="display-4">Registration</h3>
                <p class="text-muted mb-4">
                  Please enter the informations below!
                </p>
              </div>
              <mat-card *ngIf="form; else noForm">
                <mat-spinner *ngIf="isLoading$ | async" class="mx-auto"></mat-spinner>
                <mat-card-content>
                  <form [formGroup]="form" class="form-container" role="form">
                    <div class="text-center">
                      <div class="text-center">
                        <img src="{{defaultImage}}" class="avatar img-circle img-thumbnail" alt="avatar"
                          (click)="fileinput.click()">
                        <input type="file" #fileinput accept=".png,.jpg,.jpeg" style="display: none"
                          (change)="fileInputChange($event)">
                        <p class="font-weight-light" name='file' *ngIf="!size">
                          Click to select an image profile
                        </p>
                        <p class="font-weight-light" name='file' *ngIf="size" style="color: red;">
                          image size must be less than <strong>5MB</strong>
                        </p>

                        <input type="text" formControlName="image" hidden>

                      </div>
                    </div>

                    <div class="form-control-container">
                      <mat-form-field class="example-full-width">
                        <mat-label>Email</mat-label>
                        <input matInput placeholder="john@email.com" formControlName="email">
                        <mat-hint align="end">The email of the user</mat-hint>
                      </mat-form-field>
                    </div>
                    <div class="form-control-container">
                      <mat-form-field class="example-full-width">
                        <mat-label>Username</mat-label>
                        <input matInput placeholder="username" formControlName="username">
                        <mat-hint align="end">The username of the user</mat-hint>
                      </mat-form-field>
                    </div>
                    <div class="form-control-container">
                      <mat-form-field class="example-full-width">
                        <mat-label>First Name</mat-label>
                        <input matInput placeholder="first_name" formControlName="first_name">
                        <mat-hint align="end">The first name of the user</mat-hint>
                      </mat-form-field>
                    </div>
                    <div class="form-control-container">
                      <mat-form-field class="example-full-width">
                        <mat-label>Password</mat-label>
                        <input matInput type="password" formControlName="password">
                      </mat-form-field>
                    </div>
                    <div class="form-control-container">
                      <mat-form-field class="example-full-width">
                        <mat-label>Confirm Password</mat-label>
                        <input matInput type="password" formControlName="password2">
                      </mat-form-field>
                    </div>
                    <div class="form-control-container">
                      <button mat-raised-button class="form-control-button" color="primary" [disabled]="!form.valid"
                        (click)="save()">Register
                      </button>
                    </div>


                  </form>
                </mat-card-content>
                <button mat-raised-button color="primary" routerLink="/login">If you already have an account, you
                  can login
                  here
                </button>
              </mat-card>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #noForm>
  <app-loading-bar></app-loading-bar>
</ng-template>
